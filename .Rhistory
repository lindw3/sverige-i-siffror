levels_fill <- df %>%
filter(Land == "OECD countries") %>%
arrange(desc(Andel)) %>%
pull(Kategori)
p <- df %>%
filter(Land %in% c("Sweden", "OECD countries")) %>%
mutate(Kategori = factor(Kategori, levels = levels_fill)) %>%
ggplot(aes(x = Kategori, y = Andel, fill = Land,
text = paste("Kategori:" , Kategori ,
"\nAndel av statliga utgifter:" , round(Andel, 2) , "%"))) +
geom_col(position = "dodge") +
scale_fill_manual(values = c(
"OECD countries" = "#E56759",
"Sweden" = "#5991E5"
)) +
sis_theme +
theme(axis.text.x = element_text(angle = 70, hjust = 1 , vjust = 1)) +
xlab(NULL) + ylab("Andel av statliga utgifter, %")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/statligautgifter_fördelning.html")
# Skatter som andel av statens inkomster (kolla bara Sverige)
df <- read.csv("https://ourworldindata.org/grapher/tax-revenue-national-income-longrun.csv?v=1&csvType=full&useColumnShortNames=true")
colnames(df) <- c("Land" , "Kod", "År" , "Andel")
p <- df %>%
filter(Land == "Sweden") %>%
ggplot(aes(x = År, y = Andel  , group = 2,
text = paste("År:" , År ,
"\nAndel av GDP:" , round(Andel, 2) , "%"))) +
geom_line(linewidth = 1 , colour = "#5991E5") +
sis_theme +
scale_x_continuous(breaks = c(1880, max(df$År))) +
scale_y_continuous(limits = c(0 , 55) ,
breaks =  seq(0, 50, 10)) +
xlab(NULL) + ylab("Andel av GDP, %")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/skatter_statligainkomster_sverige.html")
# Skatteintäkter som andel av GDP (jämfört med andra länder)
df <- read.csv("https://ourworldindata.org/grapher/tax-revenues-as-a-share-of-gdp-unu-wider.csv?v=1&csvType=full&useColumnShortNames=true")
colnames(df) <- c("Land" , "Kod", "År" , "Andel")
p <- df %>%
ggplot(aes(x = År, y = Andel, group = Land,
alpha = Land == "Sweden" ,
linewidth = Land == "Sweden" ,
colour = Land == "Sweden",
text = paste("År:" , År ,
"\nLand:" , Land,
"\nAndel av GDP:" , round(Andel, 2) , "%"))) +
geom_line() +
scale_colour_manual(values = c("TRUE" = "#D7E559", "FALSE" = "#5991E5")) +
scale_alpha_manual(values = c("TRUE" = 1, "FALSE" = 0.25)) +
scale_linewidth_manual(values = c("TRUE" = 1.35, "FALSE" = 0.5)) +
sis_theme +
scale_x_continuous(breaks = c(min(df$År), max(df$År))) +
scale_y_continuous(limits = c(0 , max(df$Andel + 5)) ,
breaks =  seq(0, 60, 10)) +
guides(alpha = "none", linewidth = "none" ,colour = "none") +
xlab(NULL) +
ylab("Andel av GDP, %")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/skatter_statligainkomster.html")
# Ojusterat lönegap mellan män och kvinnor
df <- read.csv("https://ourworldindata.org/grapher/gender-wage-gap-oecd.csv?v=1&csvType=full&useColumnShortNames=true")
colnames(df) <- c("Land" , "Kod", "År" , "Andel")
lönegap_kön <- read_excel("data/lönegap_kön.xlsx")
lönegap_kön$Andel <- as.numeric(lönegap_kön$Andel)
df <- union(df, lönegap_kön) # Komplettering med data från OECD efter 2013
p <- df %>%
filter(Land == "Sweden") %>%
ggplot(aes(x = År, y = Andel  , group = 2,
text = paste("År:" , År ,
"\nLönegap:" , round(Andel, 2) , "%"))) +
geom_line(linewidth = 1 , colour = "#5991E5") +
sis_theme +
scale_x_continuous(breaks = c(1975, max(df$År))) +
scale_y_continuous(limits = c(0 , 30) ,
breaks =  seq(0, 30, 10)) +
xlab(NULL) + ylab("Skillnad i medianlön, %")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/lönegap_sverige.html")
# ... jämfört med andra länder
p <- df %>%
filter(År %in% c(1970:2016)) %>%
ggplot(aes(x = År, y = Andel, group = Land,
alpha = Land == "Sweden" ,
linewidth = Land == "Sweden" ,
colour = Land == "Sweden",
text = paste("År:" , År ,
"\nLand:" , Land,
"\nLönegap:" , round(Andel, 2) , "%"))) +
geom_line() +
scale_colour_manual(values = c("TRUE" = "#D7E559", "FALSE" = "#5991E5")) +
scale_alpha_manual(values = c("TRUE" = 1, "FALSE" = 0.25)) +
scale_linewidth_manual(values = c("TRUE" = 1.35, "FALSE" = 0.5)) +
sis_theme +
scale_x_continuous(breaks = c(min(df$År), 2016)) +
scale_y_continuous(limits = c(0 , max(df$Andel + 5)) ,
breaks =  seq(0, 60, 10)) +
guides(alpha = "none", linewidth = "none" ,colour = "none") +
xlab(NULL) +
ylab("Skillnad i medianlön, %")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/lönegap.html")
# Andel kvinnor i chefspositioner
df <- read.csv("https://ourworldindata.org/grapher/proportion-of-women-in-senior-and-middle-management-positions.csv?v=1&csvType=full&useColumnShortNames=true")
colnames(df) <- c("Land" , "Kod", "År" , "Andel")
p <- df %>%
filter(Land == "Sweden") %>%
ggplot(aes(x = År, y = Andel  , group = 2,
text = paste("År:" , År ,
"\nAndel kvinnor:" , round(Andel, 2) , "%"))) +
geom_line(linewidth = 1 , colour = "#5991E5") +
sis_theme +
scale_x_continuous(breaks = c(2000, 2022)) +
scale_y_continuous(limits = c(0 , 50) ,
breaks =  seq(0, 50, 10)) +
xlab(NULL) + ylab("Andel kvinnor i chefsposition, %")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/kvinnligachefer_sverige.html")
# ... jämfört med andra länder
p <- df %>%
ggplot(aes(x = År, y = Andel, group = Land,
alpha = Land == "Sweden" ,
linewidth = Land == "Sweden" ,
colour = Land == "Sweden",
text = paste("År:" , År ,
"\nLand:" , Land,
"\nAndel kvinnor:" , round(Andel, 2) , "%"))) +
geom_line() +
scale_colour_manual(values = c("TRUE" = "#D7E559", "FALSE" = "#5991E5")) +
scale_alpha_manual(values = c("TRUE" = 1, "FALSE" = 0.25)) +
scale_linewidth_manual(values = c("TRUE" = 1.35, "FALSE" = 0.5)) +
sis_theme +
scale_x_continuous(breaks = c(min(df$År), max(df$År))) +
scale_y_continuous(limits = c(0 , max(df$Andel + 5)) ,
breaks =  seq(0, 60, 10)) +
guides(alpha = "none", linewidth = "none" ,colour = "none") +
xlab(NULL) +
ylab("Andel kvinnor i chefsposition, %")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/kvinnligachefer.html")
# Medelvärde i arbetade timmar/år
df <- read.csv("https://ourworldindata.org/grapher/annual-working-hours-per-worker.csv?v=1&csvType=full&useColumnShortNames=true")
colnames(df) <- c("Land" , "Kod", "År" , "Antal")
p <- df %>%
filter(Land == "Sweden") %>%
ggplot(aes(x = År, y = Antal  , group = 2,
text = paste("År:" , År ,
"\nArbetstimmar/år:" , comma(round(Antal))))) +
geom_line(linewidth = 1 , colour = "#5991E5") +
sis_theme +
scale_x_continuous(breaks = c(1870, 1980, 2017)) +
scale_y_continuous(limits = c(0 , 3500) ,
breaks =  seq(0, 3500, 500) ,
labels = comma) +
xlab(NULL) + ylab("Genomsnittligt antal arbetstimmar/anställd/år")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/arbetstimmar_sverige.html")
# ... jämfört med andra länder
# "Sverige är även ett av de länder med flest antal lediga dagar från arbete i form av semester och röda dagar"
p <- df %>%
ggplot(aes(x = År, y = Antal, group = Land,
alpha = Land == "Sweden" ,
linewidth = Land == "Sweden" ,
colour = Land == "Sweden",
text = paste("År:" , År ,
"\nLand:" , Land,
"\nArbetstimmar/år:" , comma(round(Antal, 2))))) +
geom_line() +
scale_colour_manual(values = c("TRUE" = "#D7E559", "FALSE" = "#5991E5")) +
scale_alpha_manual(values = c("TRUE" = 1, "FALSE" = 0.25)) +
scale_linewidth_manual(values = c("TRUE" = 1.35, "FALSE" = 0.5)) +
sis_theme +
scale_x_continuous(breaks = c(min(df$År), max(df$År))) +
scale_y_continuous(limits = c(0 , max(df$Antal + 100)) ,
breaks =  seq(0, 3500, 500) ,
labels = comma) +
guides(alpha = "none", linewidth = "none" ,colour = "none") +
xlab(NULL) +
ylab("Genomsnittligt antal arbetstimmar/anställd/år")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/arbetstimmar.html")
# Vad är viktigast - arbete eller fritid?
leisure <- read.csv("https://ourworldindata.org/grapher/how-important-leisure-is-to-people-in-life.csv?v=1&csvType=full&useColumnShortNames=true")
work <- read.csv("https://ourworldindata.org/grapher/how-important-work-is-to-people-in-life.csv?v=1&csvType=full&useColumnShortNames=true")
# Count för hur många länder där arbete är viktigast, fritid är viktigast eller de är likvärdiga
# Resultat i PISA
df <- read_excel("data/pisa_data.xls")
df$Medelvärde <- as.numeric(df$Medelvärde)
df$År <- as.numeric(df$År)
p <- df %>%
filter(Land == "Sweden" ,
År != 2000) %>%
ggplot(aes(x = År, y = Medelvärde  , group = 2,
text = paste("År:" , År ,
"\nResultat:" , round(Medelvärde)))) +
geom_line(linewidth = 1 , colour = "#5991E5") +
sis_theme +
scale_x_continuous(breaks = c(2003, 2022)) +
scale_y_continuous(limits = c(300 , 510) ,
breaks =  seq(300, 500, 50)) +
xlab(NULL) + ylab("PISA-resultat")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/pisa_sverige.html")
# ... jämfört med andra länder
p <- df %>%
filter(År != 2000) %>%
ggplot(aes(x = År, y = Medelvärde, group = Land,
alpha = Land == "Sweden" ,
linewidth = Land == "Sweden" ,
colour = Land == "Sweden",
text = paste("År:" , År ,
"\nLand:" , Land,
"\nResultat:" , round(Medelvärde, 2)))) +
geom_line() +
scale_colour_manual(values = c("TRUE" = "#D7E559", "FALSE" = "#5991E5")) +
scale_alpha_manual(values = c("TRUE" = 1, "FALSE" = 0.25)) +
scale_linewidth_manual(values = c("TRUE" = 1.35, "FALSE" = 0.5)) +
sis_theme +
scale_x_continuous(breaks = c(2003, max(df$År))) +
scale_y_continuous(limits = c(300 , max(df$Medelvärde + 10)) ,
breaks =  seq(300, 550, 50)) +
guides(alpha = "none", linewidth = "none" ,colour = "none") +
xlab(NULL) +
ylab("PISA-resultat")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/pisa.html")
# CO2-utsläpp (ton) per capita
# Noterbart: Sverige är netimportörer av CO2-utsläpp, så minskningen behöver vägas mot import av CO2 så att den inte "göms" bakom dumpning av co2-utsläpp på andra länder. Dock är minskningen av betydligt större grad än ökningen i importerade utsläpp, vilket ökat något (befolkningen har dock vuxit något också under denna period, vilket driver på utsläppen)
df <- read_excel("data/co2_percapita.xlsx")
colnames(df) <- c("Land" , "År" , "Antal")
df$Antal <- as.numeric(df$Antal)
p <- df %>%
filter(Land == "Sweden") %>%
ggplot(aes(x = År, y = Antal  , group = 2,
text = paste("År:" , År ,
"\nKoldioxidutsläpp/person (ton):" , round(Antal, 1)))) +
geom_line(linewidth = 1 , colour = "#5991E5") +
sis_theme +
scale_x_continuous(breaks = c(1834, 1970, 2023)) +
scale_y_continuous(limits = c(0 , 12.5) ,
breaks =  seq(0, 12.5, 2.5)) +
xlab(NULL) + ylab("Koldioxidutsläpp (ton)")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/co2_sverige.html")
# ... jämfört med andra länder
p <- df %>%
filter(Land %in%c(
"Sweden",
"Asia",
"Africa",
"Europe",
"North America",
"Oceania",
"South America"
)
) %>%
ggplot(aes(x = År, y = Antal, group = Land, colour = Land,
text = paste("År:" , År ,
"\nLand:" , Land,
"\nKoldioxidutsläpp/person (ton):" , round(Antal, 1)))) +
geom_line() +
scale_colour_manual(values = c(
"Africa" = "#5991E5",
"Asia" = "#2DCCDE",
"Europe" = "#E56759",
"North America" = "#AD59E5",
"Oceania" = "#59E5AD",
"South America" = "#e5ad59",
"Sweden" = "#D7E559"
)) +
sis_theme +
scale_x_continuous(breaks = c(min(df$År), max(df$År))) +
xlab(NULL) +
ylab("Koldioxidutsläpp (ton)")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/co2.html")
# Andel av bruttonationalinkomst (GNI) på bistånd (FN:s mål är 0.7%)
df <- read.csv("https://ourworldindata.org/grapher/foreign-aid-given-as-a-share-of-national-income.csv?v=1&csvType=full&useColumnShortNames=true")
colnames(df) <- c("Land" , "Kod", "År" , "Andel", "Annotering")
p <- df %>%
filter(Land == "Sweden") %>%
add_row(Land = "Sweden", Kod = "SWE" , År = 2024, Andel = 0.84, Annotering = "") %>%
ggplot(aes(x = År, y = Andel  , group = 2,
text = paste("År:" , År ,
"\nAndel av GNI:" , round(Andel, 2) , "%"))) +
geom_line(linewidth = 1 , colour = "#5991E5") +
sis_theme +
scale_x_continuous(breaks = c(min(df$År), 2024)) +
scale_y_continuous(limits = c(0 , 1.5) ,
breaks =  0.7) +
xlab(NULL) + ylab("Andel av bruttonationalinkomst (GNI), %")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/bistånd_sverige.html")
# ... jämfört med andra länder
p <- df %>%
ggplot(aes(x = År, y = Andel, group = Land,
alpha = Land == "Sweden" ,
linewidth = Land == "Sweden" ,
colour = Land == "Sweden",
text = paste("År:" , År ,
"\nLand:" , Land,
"\nAndel av GNI:" , round(Andel, 2) , "%"))) +
geom_line() +
scale_colour_manual(values = c("TRUE" = "#D7E559", "FALSE" = "#5991E5")) +
scale_alpha_manual(values = c("TRUE" = 1, "FALSE" = 0.25)) +
scale_linewidth_manual(values = c("TRUE" = 1.35, "FALSE" = 0.5)) +
sis_theme +
scale_x_continuous(breaks = c(min(df$År), max(df$År))) +
scale_y_continuous(limits = c(0 , 1.5) ,
breaks =  0.7) +
guides(alpha = "none", linewidth = "none" ,colour = "none") +
xlab(NULL) +
ylab("Andel av bruttonationalinkomst (GNI), %")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/bistånd.html")
df <- read.csv("https://ourworldindata.org/grapher/population-by-age-group.csv?v=1&csvType=full&useColumnShortNames=true")
colnames(df) <- c("Land" , "Kod" , "År" , "65+" , "25-64" , "15-24" , "5-14" , "0-4")
df <-  df %>%
filter(Land == "Sweden") %>%
pivot_longer(!c(1:3) , names_to = "Kategori" , values_to = "Antal")
levels = c("65+" , "25-64" , "15-24" , "5-14" , "0-4")
p <- df %>%
ggplot(aes(x = År, y = Antal, fill = factor(Kategori , levels = levels)) ,
text = paste("År:" , År , "\nAntal:" , Antal)) +
geom_area() +
xlab(NULL) + ylab("Antal") +
labs(fill = "Ålderskategori") +
sis_theme +
scale_fill_manual(values = c("0-4" = "#5991E5",
"5-14" = "#D7E559" ,
"15-24" = "#E56759",
"25-64" = "#AD59E5" ,
"65+" = "#59E5AD")) +
scale_y_continuous(breaks = seq(0 , 10000000 , 1000000) ,
labels = comma) +
scale_x_continuous(breaks = c(min(df$År) , max(df$År)))
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
img
saveWidget(img, "images/befolkning_sverige.html")
df %>%
filter(År == 2023) %>%
summarize(Antal = sum(Antal))
df %>%
filter(År == 1950) %>%
summarize(Antal = sum(Antal))
df <- read.csv("https://ourworldindata.org/grapher/median-age.csv?v=1&csvType=full&useColumnShortNames=true")
colnames(df) <- c("Land" , "Kod" , "År" , "Median" , "Predicerad median")
p <- df %>%
filter(År < 2024 ,
Kod != "") %>%
ggplot(aes(x = År, y = Median, group = Land ,
alpha = Land == "Sweden",
linewidth = Land == "Sweden",
colour = Land == "Sweden",
text = paste(
"År:" , År,
"\nLand:" , Land,
"\nMedianålder:" , Median
)
)) +
geom_line() +
scale_colour_manual(values = c("TRUE" = "#D7E559", "FALSE" = "#5991E5")) +
scale_alpha_manual(values = c("TRUE" = 1, "FALSE" = 0.25)) +
scale_linewidth_manual(values = c("TRUE" = 1.35, "FALSE" = 0.5)) +
sis_theme +
scale_x_continuous(breaks = c(min(df$År), 2023)) +
scale_y_continuous(limits = c(10, max(df$Median, na.rm = TRUE) + 1),
breaks = seq(10, 60, 10)) +
guides(alpha = "none", linewidth = "none" , colour = "none") +
xlab(NULL) +
ylab("Medianålder")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/medianålder.html")
df <- read_excel("data/bakgrund.xlsx")
df <- df %>%
pivot_longer(cols = -c(1:3), names_to = "År", values_to = "Antal") %>%
group_by(bakgrund, År) %>%
summarize(Antal = sum(Antal), .groups = "drop") %>%
pivot_wider(names_from = bakgrund, values_from = Antal) %>%
mutate(Andel = round(`utländsk bakgrund` / `svensk bakgrund`, 3))
df$År <- as.numeric(df$År)
p <- df %>%
ggplot(aes(x = År, y = Andel  , group = 2,
text = paste("År:" , År ,
"\nAndel:" , Andel * 100, "%"))) +
geom_line(linewidth = 1 , colour = "#5991E5") +
sis_theme +
scale_x_continuous(breaks = c(min(df$År) , max(df$År))) +
scale_y_continuous(limits = c(0 , 0.5) ,
breaks = seq(0, 0.5, 0.1) ,
labels = scales::percent_format(accuracy = 1)) +
xlab(NULL) + ylab("Andel med utländsk bakgrund")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/utländskbakgrund_sverige.html")
# Andel utlandsfödda, jämfört med andra länder
df <- read.csv("https://ourworldindata.org/grapher/migrant-stock-share.csv?v=1&csvType=full&useColumnShortNames=true")
colnames(df) <- c("Land" , "Kod" , "År" , "Andel")
p <- df %>%
filter(Kod != "") %>%
ggplot(aes(x = År, y = Andel, group = Land ,
alpha = Land == "Sweden",
linewidth = Land == "Sweden",
colour = Land == "Sweden",
text = paste(
"År:" , År,
"\nLand:" , Land,
"\nAndel utlandsfödda:" , Andel * 100, "%"
)
)) +
geom_line() +
scale_colour_manual(values = c("TRUE" = "#D7E559", "FALSE" = "#5991E5")) +
scale_alpha_manual(values = c("TRUE" = 1, "FALSE" = 0.25)) +
scale_linewidth_manual(values = c("TRUE" = 1.35, "FALSE" = 0.5)) +
sis_theme +
scale_x_continuous(breaks = c(min(df$År), max(df$År))) +
scale_y_continuous(limits = c(0, max(df$Andel, na.rm = TRUE) + 0.1),
breaks = seq(0, 100, 10)) +
guides(alpha = "none", linewidth = "none" , colour = "none") +
xlab(NULL) +
ylab("Andel utlandsfödda, %")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/utlandsfödda.html")
df <- read_excel("data/bakgrund.xlsx")
df <- read_excel("data/bakgrund.xlsx")
df <- df %>%
pivot_longer(cols = -c(1:3), names_to = "År", values_to = "Antal") %>%
group_by(bakgrund, År) %>%
summarize(Antal = sum(Antal), .groups = "drop") %>%
pivot_wider(names_from = bakgrund, values_from = Antal) %>%
mutate(Andel = round(`utländsk bakgrund` / (`svensk bakgrund` + `utländsk bakgrund`), 3))
df$År <- as.numeric(df$År)
p <- df %>%
ggplot(aes(x = År, y = Andel  , group = 2,
text = paste("År:" , År ,
"\nAndel:" , Andel * 100, "%"))) +
geom_line(linewidth = 1 , colour = "#5991E5") +
sis_theme +
scale_x_continuous(breaks = c(min(df$År) , max(df$År))) +
scale_y_continuous(limits = c(0 , 0.5) ,
breaks = seq(0, 0.5, 0.1) ,
labels = scales::percent_format(accuracy = 1)) +
xlab(NULL) + ylab("Andel med utländsk bakgrund")
p
df <- read_excel("data/bakgrund.xlsx")
df <- df %>%
pivot_longer(cols = -c(1:3), names_to = "År", values_to = "Antal") %>%
group_by(bakgrund, År) %>%
summarize(Antal = sum(Antal), .groups = "drop") %>%
pivot_wider(names_from = bakgrund, values_from = Antal) %>%
mutate(Andel = round(`utländsk bakgrund` / (`svensk bakgrund` + `utländsk bakgrund`), 3))
df$År <- as.numeric(df$År)
p <- df %>%
ggplot(aes(x = År, y = Andel  , group = 2,
text = paste("År:" , År ,
"\nAndel:" , Andel * 100, "%"))) +
geom_line(linewidth = 1 , colour = "#5991E5") +
sis_theme +
scale_x_continuous(breaks = c(min(df$År) , max(df$År))) +
scale_y_continuous(limits = c(0 , 0.5) ,
breaks = seq(0, 0.5, 0.1) ,
labels = scales::percent_format(accuracy = 1)) +
xlab(NULL) + ylab("Andel med utländsk bakgrund")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/utländskbakgrund_sverige.html")
df <- read.csv("https://ourworldindata.org/grapher/migrant-stock-share.csv?v=1&csvType=full&useColumnShortNames=true")
colnames(df) <- c("Land" , "Kod" , "År" , "Andel")
p <- df %>%
filter(Kod != "") %>%
ggplot(aes(x = År, y = Andel, group = Land ,
alpha = Land == "Sweden",
linewidth = Land == "Sweden",
colour = Land == "Sweden",
text = paste(
"År:" , År,
"\nLand:" , Land,
"\nAndel utlandsfödda:" , Andel, "%"
)
)) +
geom_line() +
scale_colour_manual(values = c("TRUE" = "#D7E559", "FALSE" = "#5991E5")) +
scale_alpha_manual(values = c("TRUE" = 1, "FALSE" = 0.25)) +
scale_linewidth_manual(values = c("TRUE" = 1.35, "FALSE" = 0.5)) +
sis_theme +
scale_x_continuous(breaks = c(min(df$År), max(df$År))) +
scale_y_continuous(limits = c(0, max(df$Andel, na.rm = TRUE) + 0.1),
breaks = seq(0, 100, 10)) +
guides(alpha = "none", linewidth = "none" , colour = "none") +
xlab(NULL) +
ylab("Andel utlandsfödda, %")
img <- ggplotly(p, tooltip = "text") %>%
config(displayModeBar = F)
saveWidget(img, "images/utlandsfödda.html")
