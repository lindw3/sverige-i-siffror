library(gridExtra)
library(openxlsx)
library(patchwork)
library(ggthemes)
library(plotly)
library(ggridges)
library(forecast)
library(GGally)
library(cluster)
library(sf)
df <- read.csv("https://ourworldindata.org/grapher/children-born-per-woman.csv?v=1&csvType=full&useColumnShortNames=true")
View(df)
read.csv("https://api.scb.se/OV0104/v1/doris/sv/ssd/START/AM/AM0110/AM0110B/LonYrkeAlderAN")
read.csv("https://api.scb.se/ov0104/v2beta/api/v2/tables/TAB5900/data?lang=sv&valueCodes[ContentsCode]=000007C9&valueCodes[Sektor]=0&valueCodes[Yrkesgrupp12]=0000&valueCodes[Kon]=1,2&valueCodes[Alder]=65-68,tot&valueCodes[Tid]=2024")
df <- read.csv("https://api.scb.se/ov0104/v2beta/api/v2/tables/TAB5900/data?lang=sv&valueCodes[ContentsCode]=000007C9&valueCodes[Sektor]=0&valueCodes[Yrkesgrupp12]=0000&valueCodes[Kon]=1,2&valueCodes[Alder]=65-68,tot&valueCodes[Tid]=2024")
View(df)
df <- read.csv("https://ourworldindata.org/grapher/children-born-per-woman.csv?v=1&csvType=full&useColumnShortNames=true")
View(df)
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(color = "blue")
sis_theme <- theme(plot.background = element_rect(fill = "#e5ad59") ,
plot.caption = element_text(hjust = 0) ,
panel.background = element_rect(fill = "white"),
axis.line.x = element_line(color = "black" , linewidth = 0.75) ,
axis.line.y = element_line(color = "black" , linewidth = 0.75) ,
plot.title = element_text(color = "white" , size = 16 , family = "sans"),
panel.grid.major.y  = element_line(color = "#e5ad59" , linetype = "dotted"),
panel.grid.major.x = element_line(NULL),
panel.grid.minor = element_line(NULL),
legend.background = element_rect(fill = "white"),
legend.key = element_rect(fill = "white"),
legend.text = element_text(color = "black" , family = "sans") ,
legend.title = element_text(color = "black" , family = "sans") ,
text = element_text(size=12, face="plain", color = "white" , family = "sans"),
axis.title = element_text(color = "white" , family = "sans"),
axis.text = element_text(color = "white" , family = "sans"))
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line() +
sis_theme
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 0,5) +
sis_theme
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(aes(linewidth = 0,5)) +
sis_theme
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(aes(linewidth = 0.5)) +
sis_theme
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(aes(linewidth = 0.2)) +
sis_theme
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line() +
sis_theme +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(size = 1.5) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_discrete(breaks = seq(0 , 4 , 1))
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_discrete(breaks = seq(0 , 4 , 1)) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_discrete(labels = seq(0, 4, 1), breaks = seq(0 , 4 , 1)) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_discrete(labels = seq(0, 4, 1)) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continous(labels = seq(0, 4, 1)) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(labels = seq(0, 4, 1)) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(breaks = seq(0, 4, 1)) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(breaks = c(0, 1, 2, 3, 4)) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(breaks = 0:4 , labels = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(breaks = 1:4 , labels = 1:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(breaks = 1:5 , labels = 1:5) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(size = 1.5) +
scale_x_continuous(
name = "År",
breaks = c(1891, 1935, 2023)
) +
scale_y_continuous(
name = "Barn per kvinna",
breaks = 0:4 # Sets y-axis ticks at 0, 1, 2, 3, 4
) +
sis_theme
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = 0:4)
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = 0:4 , breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = seq(0 , 4 , 1) ,
breaks = seq(0 , 4 , 1)) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist ,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
ggplotly(df , tooltip = "text") %>%
config(displayModeBar = F) %>%
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist ,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist ,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.1) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist  ,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist  , group = Year,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist  , group = Year, colour = Year,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist  , group = 1,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df <- df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist  , group = 1,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
ggplotly(df , tooltip = "text") %>%
config(displayModeBar = F)
df <- df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = round(fertility_rate_hist , 1)  , group = 1,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
df <- read.csv("https://ourworldindata.org/grapher/children-born-per-woman.csv?v=1&csvType=full&useColumnShortNames=true")
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = round(fertility_rate_hist , 1)  , group = 1,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna") %>%
ggplotly(tooltip = "text") %>%
config(displayModeBar = F)
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = round(fertility_rate_hist , 1)  , group = 1,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna") +
ggplotly(tooltip = "text") %>%
config(displayModeBar = F)
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = round(fertility_rate_hist , 1)  , group = 1,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna") -> df
ggplotly(df, tooltip = "text") %>%
config(displayModeBar = F)
df <- read.csv("https://ourworldindata.org/grapher/children-born-per-woman.csv?v=1&csvType=full&useColumnShortNames=true")
df <- df %>%
mutate(fertility_rate_hist = round(fertility_rate_hist, 1))
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist)  , group = 1,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist  , group = 1,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna") -> df
ggplotly(df, tooltip = "text") %>%
config(displayModeBar = F)
img <- ggplotly(df, tooltip = "text") %>%
config(displayModeBar = F)
orca(img, "images/barnafödande.png")
# Barnafödande i Sverige
df <- read.csv("https://ourworldindata.org/grapher/children-born-per-woman.csv?v=1&csvType=full&useColumnShortNames=true")
df <- df %>%
mutate(fertility_rate_hist = round(fertility_rate_hist, 1))
df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist  , group = 2,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna") -> df
img <- ggplotly(df, tooltip = "text") %>%
config(displayModeBar = F)
kaleido(img, "images/barnafödande.png")
export(img, file = "images/barnafödande.png")
ggsave(img, "images/barnafödande.png")
install.packages("reticulate")
library(reticulate)
reticulate(img, file = "images/barnafödande.png")
kaleido(img, file = "images/barnafödande.png")
kaleido(img, file = "images/barnafödande.png")
save_image(img, file = "images/barnafödande.png")
reticulate::py_run_string("import sys")
save_image(img, file = "images/barnafödande.png")
library(jsonlite)
library(ggplot2)
library(stringr)
library(scales)
library(dplyr)
library(tidyr)
library(DT)
library(png)
library(data.table)
library(magrittr)
library(gridExtra)
library(openxlsx)
library(patchwork)
library(ggthemes)
library(plotly)
library(reticulate)
library(ggridges)
library(forecast)
library(GGally)
library(cluster)
library(sf)
library(processx)
df <- read.csv("https://ourworldindata.org/grapher/children-born-per-woman.csv?v=1&csvType=full&useColumnShortNames=true")
df <- df %>%
mutate(fertility_rate_hist = round(fertility_rate_hist, 1))
df <- df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist  , group = 2,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
img <- ggplotly(df, tooltip = "text") %>%
config(displayModeBar = F)
img
df <- read.csv("https://ourworldindata.org/grapher/children-born-per-woman.csv?v=1&csvType=full&useColumnShortNames=true")
df <- df %>%
mutate(fertility_rate_hist = round(fertility_rate_hist, 2))
df <- df %>%
filter(Entity == "Sweden") %>%
ggplot(aes(x = Year, y = fertility_rate_hist  , group = 2,
text = paste("År:" , Year ,
"\nBarn:" , fertility_rate_hist))) +
geom_line(linewidth = 1.2) +
sis_theme +
scale_x_continuous(breaks = c(1891, 1935, 2023)) +
scale_y_continuous(limits = c(0 , 4.2) ,
breaks = 0:4) +
xlab("År") + ylab("Barn per kvinna")
img <- ggplotly(df, tooltip = "text") %>%
config(displayModeBar = F)
img
orca(fig, "barnafödande_sverige.png")
library(htmlwidgets)
saveWidget(fig, "barnafödande_sverige.html")
saveWidget(img, "barnafödande_sverige.html")
saveWidget(img, "images/barnafödande_sverige.html")
img
